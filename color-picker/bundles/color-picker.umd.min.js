!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/common"),require("@angular/core")):"function"==typeof define&&define.amd?define("color-picker",["exports","@angular/common","@angular/core"],e):e(t["color-picker"]={},t.ng.common,t.ng.core)}(this,function(t,e,n){"use strict";var p={HEX:0,RGBA:1,HSLA:2};p[p.HEX]="HEX",p[p.RGBA]="RGBA",p[p.HSLA]="HSLA";var s=function A(t,e,r,o){this.c=t,this.m=e,this.y=r,this.k=o},l=function D(t,e,r,o){this.h=t,this.s=e,this.l=r,this.a=o},h=function M(t,e,r,o){this.h=t,this.s=e,this.v=r,this.a=o},u=function P(t,e,r,o){this.r=t,this.g=e,this.b=r,this.a=o},r=function(){function t(){this.active=null}return t.prototype.setActive=function(t){this.active&&this.active!==t&&"inline"!==this.active.cpDialogDisplay&&this.active.closeDialog(),this.active=t},t.prototype.hsva2hsla=function(t){var e=t.h,r=t.s,o=t.v,i=t.a;if(0===o)return new l(e,0,0,i);if(0===r&&1===o)return new l(e,1,1,i);var n=o*(2-r)/2;return new l(e,o*r/(1-Math.abs(2*n-1)),n,i)},t.prototype.hsla2hsva=function(t){var e=Math.min(t.h,1),r=Math.min(t.s,1),o=Math.min(t.l,1),i=Math.min(t.a,1);if(0===o)return new h(e,0,0,i);var n=o+r*(1-Math.abs(2*o-1))/2;return new h(e,2*(n-o)/n,n,i)},t.prototype.hsvaToRgba=function(t){var e,r,o,i=t.h,n=t.s,s=t.v,a=t.a,p=Math.floor(6*i),l=6*i-p,c=s*(1-n),h=s*(1-l*n),d=s*(1-(1-l)*n);switch(p%6){case 0:e=s,r=d,o=c;break;case 1:e=h,r=s,o=c;break;case 2:e=c,r=s,o=d;break;case 3:e=c,r=h,o=s;break;case 4:e=d,r=c,o=s;break;case 5:e=s,r=c,o=h;break;default:o=r=e=0}return new u(e,r,o,a)},t.prototype.rgbaToCmyk=function(t){var e=1-Math.max(t.r,t.g,t.b);if(1==e)return new s(0,0,0,1);var r=(1-t.r-e)/(1-e),o=(1-t.g-e)/(1-e),i=(1-t.b-e)/(1-e);return new s(r,o,i,e)},t.prototype.rgbaToHsva=function(t){var e,r,o=Math.min(t.r,1),i=Math.min(t.g,1),n=Math.min(t.b,1),s=Math.min(t.a,1),a=Math.max(o,i,n),p=Math.min(o,i,n),l=a,c=a-p;if(r=0===a?0:c/a,a===p)e=0;else{switch(a){case o:e=(i-n)/c+(i<n?6:0);break;case i:e=(n-o)/c+2;break;case n:e=(o-i)/c+4;break;default:e=0}e/=6}return new h(e,r,l,s)},t.prototype.rgbaToHex=function(t,e){var r="#"+(1<<24|t.r<<16|t.g<<8|t.b).toString(16).substr(1);return e&&(r+=(256|Math.round(255*t.a)).toString(16).substr(1)),r},t.prototype.denormalizeRGBA=function(t){return new u(Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b),t.a)},t.prototype.stringToHsva=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1);var r=null;t=(t||"").toLowerCase();var o=[{re:/(rgb)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*%?,\s*(\d{1,3})\s*%?(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return new u(parseInt(t[2],10)/255,parseInt(t[3],10)/255,parseInt(t[4],10)/255,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]))}},{re:/(hsl)a?\(\s*(\d{1,3})\s*,\s*(\d{1,3})%\s*,\s*(\d{1,3})%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return new l(parseInt(t[2],10)/360,parseInt(t[3],10)/100,parseInt(t[4],10)/100,isNaN(parseFloat(t[5]))?1:parseFloat(t[5]))}}];for(var i in e?o.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})?$/,parse:function(t){return new u(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,parseInt(t[4]||"FF",16)/255)}}):o.push({re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})$/,parse:function(t){return new u(parseInt(t[1],16)/255,parseInt(t[2],16)/255,parseInt(t[3],16)/255,1)}}),o.push({re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])$/,parse:function(t){return new u(parseInt(t[1]+t[1],16)/255,parseInt(t[2]+t[2],16)/255,parseInt(t[3]+t[3],16)/255,1)}}),o)if(o.hasOwnProperty(i)){var n=o[i],s=n.re.exec(t),a=s&&n.parse(s);if(a)return a instanceof u?r=this.rgbaToHsva(a):a instanceof l&&(r=this.hsla2hsva(a)),r}return r},t.prototype.outputFormat=function(t,e,r){switch("auto"===e&&(e=t.a<1?"rgba":"hex"),e){case"hsla":var o=this.hsva2hsla(t),i=new l(Math.round(360*o.h),Math.round(100*o.s),Math.round(100*o.l),Math.round(100*o.a)/100);return t.a<1||"always"===r?"hsla("+i.h+","+i.s+"%,"+i.l+"%,"+i.a+")":"hsl("+i.h+","+i.s+"%,"+i.l+"%)";case"rgba":var n=this.denormalizeRGBA(this.hsvaToRgba(t));return t.a<1||"always"===r?"rgba("+n.r+","+n.g+","+n.b+","+Math.round(100*n.a)/100+")":"rgb("+n.r+","+n.g+","+n.b+")";default:var s="always"===r||"forced"===r;return this.rgbaToHex(this.denormalizeRGBA(this.hsvaToRgba(t)),s)}},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();function c(t,e){Math.round(100*t.a)<100&&(t=d(t,e));var r=i(t)+.05,o=i(e)+.05;return Math.max(r,o)/Math.min(r,o)}function d(t,e){var r=function s(t,e){return 1-(1-e)*(1-t)}(t.a,e.a),o=a(t.r,t.a,e.r,e.a,r),i=a(t.g,t.a,e.g,e.a,r),n=a(t.b,t.a,e.b,e.a,r);return new u(o,i,n,r)}function a(t,e,r,o,i){return 0==i?0:(t*e+r*o*(1-e))/i}function i(t){var e=t.r/255;e=e<.03928?e/12.92:Math.pow((e+.055)/1.055,2.4);var r=t.g/255;r=r<.03928?r/12.92:Math.pow((r+.055)/1.055,2.4);var o=t.b/255;return.2126*e+.7152*r+.0722*(o=o<.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))}var g=new u(218,218,218,1),v=new u(34,34,34,1);function f(t){var e=c(g,new u(t.r,t.g,t.b,1));return c(v,new u(t.r,t.g,t.b,1))<e}var C=function E(t,e,r,o){this.h=t,this.s=e,this.v=r,this.a=o},_={auto:"auto",hex:"hex",rgba:"rgba",hsla:"hsla"},B={enabled:"enabled",disabled:"disabled",always:"always",forced:"forced"},m={top:"top",left:"left",right:"right",bottom:"bottom"},H={popup:"popup",inline:"inline"},b={fixed:"fixed",relative:"relative","static":"static",absolute:"absolute"},x={color:0,grayscale:1,presets:2};function O(t){switch(t.toString().toUpperCase()){case"1":case"C":case"COLOR":return x.color;case"2":case"G":case"GRAYSCALE":return x.grayscale;case"3":case"P":case"PRESETS":return x.presets;default:return x.color}}x[x.color]="color",x[x.grayscale]="grayscale",x[x.presets]="presets";var I=function(){function t(t,e,r){this.elRef=t,this.cdRef=e,this.service=r,this.alphaChannel=B,this.colorModeInternal=x,this.dialogDisplay=H,this.isIE10=!1,this.dialogArrowSize=10,this.dialogArrowOffset=15,this.dialogInputFields=[p.HEX,p.RGBA,p.HSLA],this.useRootViewContainer=!1,this.position=b.relative,this.cpColorMode=x.color,this.cpPosition=m.right}return t.prototype.handleEsc=function(t){this.show&&this.cpDialogDisplay==H.popup&&this.onCancelColor(t)},t.prototype.handleEnter=function(t){this.show&&this.cpDialogDisplay==H.popup&&this.onAcceptColor(t)},t.prototype.ngOnInit=function(){var e=this;this.slider=new C(0,0,0,0),this.cpOutputFormat==_.rgba?this.format=p.RGBA:this.cpOutputFormat==_.hsla?this.format=p.HSLA:this.format=p.HEX,this.listenerMouseDown=function(t){e.onMouseDown(t)},this.listenerResize=function(){e.onResize()},this.openDialog(this.initialColor,!1)},t.prototype.ngOnDestroy=function(){this.closeDialog()},t.prototype.ngAfterViewInit=function(){230===this.cpWidth&&this.cpDialogDisplay!=H.inline||(this.updateColorPicker(!1),this.cdRef.detectChanges())},t.prototype.openDialog=function(t,e){void 0===e&&(e=!0),this.service.setActive(this),this.width||(this.cpWidth=this.directiveElementRef.nativeElement.offsetWidth),this.height||(this.height=320),this.setInitialColor(t),this.setColorFromString(t,e),this.openColorPicker()},t.prototype.closeDialog=function(){this.closeColorPicker()},t.prototype.setupDialog=function(t,e,r,o,i,n,s,a,p,l,c,h,d,u,g,v,f,C,m,b,x,I,y,k,w,A,D,M,P,E,R,S){this.setInitialColor(r),this.cpColorMode=O(a),this.isIE10=10===function T(){var t="";"undefined"!=typeof navigator&&(t=navigator.userAgent.toLowerCase());var e=t.indexOf("msie ");return 0<e&&parseInt(t.substring(e+5,t.indexOf(".",e)),10)}(),this.directiveInstance=t,this.directiveElementRef=e,this.cpDisableInput=c,this.cpAlphaChannel=p,this.cpOutputFormat=l,this.cpDialogDisplay=n,this.cpIgnoredElements=h,this.cpSaveClickOutside=d,this.cpCloseClickOutside=u,this.useRootViewContainer=g,this.width=this.cpWidth=parseInt(o,10),this.height=this.cpHeight=parseInt(i,10),this.cpPosition=v,this.cpPositionOffset=parseInt(f,10),this.cpOKButton=k,this.cpOKButtonText=A,this.cpOKButtonClass=w,this.cpCancelButton=D,this.cpCancelButtonText=P,this.cpCancelButtonClass=M,this.fallbackColor=s||"#fff",this.setPresetConfig(m,b),this.cpMaxPresetColorsLength=x,this.cpPresetEmptyMessage=I,this.cpPresetEmptyMessageClass=y,this.cpAddColorButton=E,this.cpAddColorButtonText=R,this.cpRemoveColorButtonClass=S,C||(this.dialogArrowOffset=0),n==H.inline&&(this.dialogArrowSize=0,this.dialogArrowOffset=0),l==_.hex&&p!=B.always&&p!=B.forced&&(this.cpAlphaChannel=B.disabled)},t.prototype.setInitialColor=function(t){this.initialColor=t},t.prototype.setPresetConfig=function(t,e){this.cpPresetLabel=t,this.cpPresetColors=e},t.prototype.setColorFromString=function(t,e,r){var o;void 0===e&&(e=!0),void 0===r&&(r=!0),(this.cpAlphaChannel==B.always||this.cpAlphaChannel==B.forced)&&((o=this.service.stringToHsva(t,!0))||this.hsva)||(o=this.service.stringToHsva(t,!1)),o||this.hsva||(o=this.service.stringToHsva(this.fallbackColor,!1)),o&&(this.hsva=o,this.sliderH=this.hsva.h,this.updateColorPicker(e,r))},t.prototype.onResize=function(){this.position==b.fixed?this.setDialogPosition():this.cpDialogDisplay!=H.inline&&this.closeColorPicker()},t.prototype.onDragEnd=function(t){this.directiveInstance.sliderDragEnd({slider:t,color:this.outputColor})},t.prototype.onDragStart=function(t){this.directiveInstance.sliderDragStart({slider:t,color:this.outputColor})},t.prototype.onMouseDown=function(e){this.isIE10||this.cpDialogDisplay!=H.popup||e.target===this.directiveElementRef.nativeElement||this.isDescendant(this.elRef.nativeElement,e.target)||this.isDescendant(this.directiveElementRef.nativeElement,e.target)||0!==this.cpIgnoredElements.filter(function(t){return t===e.target}).length||(this.cpSaveClickOutside||(this.setColorFromString(this.initialColor,!1),this.directiveInstance.colorChanged(this.initialColor)),this.cpCloseClickOutside&&this.closeColorPicker())},t.prototype.onAcceptColor=function(t){t.stopPropagation(),this.cpDialogDisplay==H.popup&&this.closeColorPicker(),this.outputColor&&this.directiveInstance.colorSelected(this.outputColor)},t.prototype.onCancelColor=function(t){t.stopPropagation(),this.setColorFromString(this.initialColor,!0),this.cpDialogDisplay==H.popup&&(this.directiveInstance.colorChanged(this.initialColor,!0),this.closeColorPicker()),this.directiveInstance.colorCanceled()},t.prototype.onFormatToggle=function(t){var e=this.dialogInputFields.length,r=((this.dialogInputFields.indexOf(this.format)+t)%e+e)%e;this.format=this.dialogInputFields[r]},t.prototype.onColorChange=function(t){this.hsva.s=t.s/t.rgX,this.hsva.v=t.v/t.rgY,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"lightness",value:this.hsva.v,color:this.outputColor}),this.directiveInstance.sliderChanged({slider:"saturation",value:this.hsva.s,color:this.outputColor})},t.prototype.onHueChange=function(t){this.hsva.h=t.v/t.rgX,this.sliderH=this.hsva.h,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"hue",value:this.hsva.h,color:this.outputColor})},t.prototype.onValueChange=function(t){this.hsva.v=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"value",value:this.hsva.v,color:this.outputColor})},t.prototype.onAlphaChange=function(t){this.hsva.a=t.v/t.rgX,this.updateColorPicker(),this.directiveInstance.sliderChanged({slider:"alpha",value:this.hsva.a,color:this.outputColor})},t.prototype.onHexInput=function(t){if(null===t)this.updateColorPicker();else{t&&"#"!==t[0]&&(t="#"+t);var e=/^#([a-f0-9]{3}|[a-f0-9]{6})$/gi;this.cpAlphaChannel==B.always&&(e=/^#([a-f0-9]{3}|[a-f0-9]{6}|[a-f0-9]{8})$/gi);var r=e.test(t);r&&(t.length<5&&(t="#"+t.substring(1).split("").map(function(t){return t+t}).join("")),this.cpAlphaChannel==B.forced&&(t+=Math.round(255*this.hsva.a).toString(16)),this.setColorFromString(t,!0,!1)),this.directiveInstance.inputChanged({input:"hex",valid:r,value:t,color:this.outputColor})}},t.prototype.onRedInput=function(t){var e=this.service.hsvaToRgba(this.hsva),r=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;r&&(e.r=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"red",valid:r,value:e.r,color:this.outputColor})},t.prototype.onBlueInput=function(t){var e=this.service.hsvaToRgba(this.hsva),r=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;r&&(e.b=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"blue",valid:r,value:e.b,color:this.outputColor})},t.prototype.onGreenInput=function(t){var e=this.service.hsvaToRgba(this.hsva),r=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;r&&(e.g=t.v/t.rg,this.hsva=this.service.rgbaToHsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"green",valid:r,value:e.g,color:this.outputColor})},t.prototype.onHueInput=function(t){var e=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;e&&(this.hsva.h=t.v/t.rg,this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"hue",valid:e,value:this.hsva.h,color:this.outputColor})},t.prototype.onValueInput=function(t){var e=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;e&&(this.hsva.v=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"value",valid:e,value:this.hsva.v,color:this.outputColor})},t.prototype.onAlphaInput=function(t){var e=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;e&&(this.hsva.a=t.v/t.rg,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"alpha",valid:e,value:this.hsva.a,color:this.outputColor})},t.prototype.onLightnessInput=function(t){var e=this.service.hsva2hsla(this.hsva),r=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;r&&(e.l=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"lightness",valid:r,value:e.l,color:this.outputColor})},t.prototype.onSaturationInput=function(t){var e=this.service.hsva2hsla(this.hsva),r=!isNaN(t.v)&&0<=t.v&&t.v<=t.rg;r&&(e.s=t.v/t.rg,this.hsva=this.service.hsla2hsva(e),this.sliderH=this.hsva.h,this.updateColorPicker()),this.directiveInstance.inputChanged({input:"saturation",valid:r,value:e.s,color:this.outputColor})},t.prototype.onAddPresetColor=function(t,e){t.stopPropagation(),this.cpPresetColors.filter(function(t){return t===e}).length||(this.cpPresetColors=this.cpPresetColors.concat(e),this.directiveInstance.presetColorsChanged(this.cpPresetColors))},t.prototype.onRemovePresetColor=function(t,e){t.stopPropagation(),this.cpPresetColors=this.cpPresetColors.filter(function(t){return t!==e}),this.directiveInstance.presetColorsChanged(this.cpPresetColors)},t.prototype.openColorPicker=function(){var t=this;this.show||(this.show=!0,this.hidden=!0,setTimeout(function(){t.hidden=!1,t.setDialogPosition(),t.cdRef.detectChanges()},0),this.directiveInstance.stateChanged(!0),this.isIE10||document.addEventListener("mousedown",this.listenerMouseDown),window.addEventListener("resize",this.listenerResize))},t.prototype.closeColorPicker=function(){this.show&&(this.show=!1,this.directiveInstance.stateChanged(!1),this.isIE10||document.removeEventListener("mousedown",this.listenerMouseDown),window.removeEventListener("resize",this.listenerResize),this.cdRef.destroyed||this.cdRef.detectChanges())},t.prototype.updateColorPicker=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this.cpColorMode==x.grayscale&&(this.hsva.s=0);var r=this.outputColor,o=this.service.hsva2hsla(this.hsva),i=this.service.denormalizeRGBA(this.service.hsvaToRgba(this.hsva)),n=this.service.denormalizeRGBA(this.service.hsvaToRgba(new h(this.sliderH||this.hsva.h,1,1,1)));if(e){this.hslaText=new l(Math.round(360*o.h),Math.round(100*o.s),Math.round(100*o.l),Math.round(100*o.a)/100),this.rgbaText=new u(i.r,i.g,i.b,Math.round(100*i.a)/100);var s=this.cpAlphaChannel==B.always;this.hexText=this.service.rgbaToHex(i,s),this.hexAlpha=this.rgbaText.a}this.cpOutputFormat==_.auto&&this.hsva.a<1&&(this.format=this.hsva.a<1?p.RGBA:p.HEX),this.hueSliderColor="rgb("+n.r+","+n.g+","+n.b+")",this.alphaSliderColor="linear-gradient(to right, rgba("+i.r+","+i.g+","+i.b+", 0) 0%, rgba("+i.r+","+i.g+","+i.b+", 1) 100%)",this.svSliderWhite=f(i),this.hueSliderWhite=f(n),this.valueSliderWhite=f(i),this.alphaSliderWhite=function a(t){var e=d(t,g),r=c(g,new u(e.r,e.g,e.b,1));return c(v,new u(e.r,e.g,e.b,1))<r}(i),this.outputColor=this.service.outputFormat(this.hsva,this.cpOutputFormat,this.cpAlphaChannel),this.selectedColor=this.service.outputFormat(this.hsva,"rgba",null),this.slider=new C(this.sliderH||this.hsva.h,this.hsva.s,1-this.hsva.v,this.hsva.a),t&&r!==this.outputColor&&this.directiveInstance.colorChanged(this.outputColor)},t.prototype.setDialogPosition=function(){if(this.cpDialogDisplay==H.inline)this.position=b.relative;else{for(var t=b["static"],e="",r=void 0,o=null,i=null,n=this.directiveElementRef.nativeElement.parentNode,s=this.dialogElement.nativeElement.offsetHeight;null!==n&&"HTML"!==n.tagName;){if(t=(r=window.getComputedStyle(n)).getPropertyValue("position"),e=r.getPropertyValue("transform"),t!=b["static"]&&null===o&&(o=n),e&&"none"!==e&&null===i&&(i=n),t==b.fixed){o=i;break}n=n.parentNode}var a=this.createDialogBox(this.directiveElementRef.nativeElement,t!=b.fixed);if(this.useRootViewContainer||t==b.fixed&&(!o||o instanceof HTMLUnknownElement))this.top=a.top,this.left=a.left;else{null===o&&(o=n);var p=this.createDialogBox(o,t!=b.fixed);this.top=a.top-p.top,this.left=a.left-p.left}t==b.fixed&&(this.position=b.fixed),this.cpPosition==m.left?(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left-=this.cpWidth+this.dialogArrowSize-2):this.cpPosition==m.top?(this.arrowTop=s-1,this.top-=s+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):this.cpPosition==m.bottom?(this.top+=a.height+this.dialogArrowSize,this.left+=this.cpPositionOffset/100*a.width-this.dialogArrowOffset):(this.top+=a.height*this.cpPositionOffset/100-this.dialogArrowOffset,this.left+=a.width+this.dialogArrowSize-2)}},t.prototype.isDescendant=function(t,e){for(var r=e.parentNode;null!==r;){if(r===t)return!0;r=r.parentNode}return!1},t.prototype.createDialogBox=function(t,e){return{top:t.getBoundingClientRect().top+(e?window.pageYOffset:0),left:t.getBoundingClientRect().left+(e?window.pageXOffset:0),width:t.offsetWidth,height:t.offsetHeight}},t.decorators=[{type:n.Component,args:[{selector:"cp-color-picker",template:'<div #dialogPopup\r\n    class="color-picker"\r\n    (click)="$event.stopPropagation()"\r\n    [ngStyle]="{\r\n        visibility: hidden || !show ? \'hidden\' : \'visible\',\r\n        top: top || 0,\r\n        left: left || 0,\r\n        position: position || \'\',\r\n        height: cpHeight || \'auto\',\r\n        width: cpWidth || \'auto\'\r\n    }">\r\n    <div *ngIf="cpDialogDisplay == dialogDisplay.popup"\r\n        class="color-picker__arrow"\r\n        [ngClass]="\'color-picker__arrow--\' + cpPosition"\r\n        [ngStyle]="{ \r\n            top: arrowTop\r\n        }"></div>\r\n    <div *ngIf="cpColorMode == colorModeInternal.color"\r\n        class="color-picker__sv"\r\n        cpSlider\r\n        [rgX]="1"\r\n        [rgY]="1"\r\n        (newValue)="onColorChange($event)"\r\n        (dragStart)="onDragStart(\'saturation-lightness\')"\r\n        (dragEnd)="onDragEnd(\'saturation-lightness\')"\r\n        [ngStyle]="{ \r\n            backgroundColor: hueSliderColor || \'\'\r\n        }">\r\n        <div class="color-picker__cursor color-picker__cursor--sv"\r\n            [ngClass]="{ \'color-picker__cursor--white\': svSliderWhite }"\r\n            [ngStyle]="{\r\n                top: (slider?.v || 0) * 100 + \'%\',\r\n                left: (slider?.s || 0) * 100 + \'%\'\r\n            }"></div>\r\n    </div>\r\n    <div class="color-picker__controls">\r\n        <div class="color-picker__selected">\r\n            <div class="color-picker__selected-color">\r\n                <div [ngStyle]="{ \r\n                    backgroundColor: selectedColor || \'\'\r\n                }"></div>\r\n            </div>\r\n            <button *ngIf="cpAddColorButton"\r\n                class="color-picker__add-selected"\r\n                [disabled]="cpPresetColors && cpPresetColors.length >= cpMaxPresetColorsLength"\r\n                (click)="onAddPresetColor($event, selectedColor)">{{ cpAddColorButtonText }}</button>\r\n        </div>\r\n        <div class="color-picker__hav">\r\n            <div *ngIf="cpColorMode == colorModeInternal.color"\r\n                class="color-picker__slider color-picker__slider--hue"\r\n                cpSlider\r\n                [rgX]="1"\r\n                (newValue)="onHueChange($event)"\r\n                (dragStart)="onDragStart(\'hue\')"\r\n                (dragEnd)="onDragEnd(\'hue\')">\r\n                <div class="color-picker__cursor"\r\n                    [ngClass]="{ \'color-picker__cursor--white\': hueSliderWhite }"\r\n                    [ngStyle]="{\r\n                        left: (slider?.h || 0) * 100 + \'%\'\r\n                    }"></div>\r\n            </div>\r\n            <div *ngIf="cpColorMode == colorModeInternal.grayscale"\r\n                class="color-picker__slider color-picker__slider--value"\r\n                cpSlider\r\n                [rgX]="1"\r\n                (newValue)="onValueChange($event)"\r\n                (dragStart)="onDragStart(\'value\')"\r\n                (dragEnd)="onDragEnd(\'value\')">\r\n                <div class="color-picker__cursor"\r\n                    [ngClass]="{ \'color-picker__cursor--white\': valueSliderWhite }"\r\n                    [ngStyle]="{\r\n                        left: (1 - (slider?.v || 0)) * 100 + \'%\'\r\n                    }"></div>\r\n            </div>\r\n            <div *ngIf="cpAlphaChannel != alphaChannel.disabled"\r\n                class="color-picker__slider color-picker__slider--alpha"\r\n                cpSlider\r\n                [rgX]="1"\r\n                (newValue)="onAlphaChange($event)"\r\n                (dragStart)="onDragStart(\'alpha\')"\r\n                (dragEnd)="onDragEnd(\'alpha\')">\r\n                <div class="color-picker__slider--alpha-bg"\r\n                    [ngStyle]="{\r\n                        backgroundImage: alphaSliderColor || \'\'\r\n                    }">\r\n                    <div class="color-picker__cursor"\r\n                        [ngClass]="{ \'color-picker__cursor--white\': alphaSliderWhite }"\r\n                        [ngStyle]="{\r\n                            left: (slider?.a || 0) * 100 + \'%\'\r\n                        }"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf="!cpDisableInput && cpColorMode == colorModeInternal.color"\r\n        class="hsla-text"\r\n        [style.display]="format !== 2 ? \'none\' : \'block\'">\r\n        <div class="box">\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="360"\r\n                cpText\r\n                [rg]="360"\r\n                [value]="hslaText?.h"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onHueInput($event)" />\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="100"\r\n                cpText\r\n                [rg]="100"\r\n                [value]="hslaText?.s"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onSaturationInput($event)" />\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="100"\r\n                cpText\r\n                [rg]="100"\r\n                [value]="hslaText?.l"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onLightnessInput($event)" />\r\n            <input *ngIf="cpAlphaChannel != alphaChannel.disabled"\r\n                type="number"\r\n                pattern="[0-9]+([\\.,][0-9]{1,2})?"\r\n                min="0"\r\n                max="1"\r\n                step="0.1"\r\n                cpText\r\n                [rg]="1"\r\n                [value]="hslaText?.a"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onAlphaInput($event)" />\r\n        </div>\r\n\r\n        <div class="box">\r\n            <div>H</div>\r\n            <div>S</div>\r\n            <div>L</div>\r\n            <div *ngIf="cpAlphaChannel != alphaChannel.disabled">A</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf="!cpDisableInput && cpColorMode == colorModeInternal.color"\r\n        [style.display]="format !== 1 ? \'none\' : \'block\'"\r\n        class="rgba-text">\r\n        <div class="box">\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="255"\r\n                cpText\r\n                [rg]="255"\r\n                [value]="rgbaText?.r"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onRedInput($event)" />\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="255"\r\n                cpText\r\n                [rg]="255"\r\n                [value]="rgbaText?.g"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onGreenInput($event)" />\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="255"\r\n                cpText\r\n                [rg]="255"\r\n                [value]="rgbaText?.b"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onBlueInput($event)" />\r\n            <input *ngIf="cpAlphaChannel != alphaChannel.disabled"\r\n                type="number"\r\n                pattern="[0-9]+([\\.,][0-9]{1,2})?"\r\n                min="0"\r\n                max="1"\r\n                step="0.1"\r\n                cpText\r\n                [rg]="1"\r\n                [value]="rgbaText?.a"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onAlphaInput($event)" />\r\n        </div>\r\n\r\n        <div class="box">\r\n            <div>R</div>\r\n            <div>G</div>\r\n            <div>B</div>\r\n            <div *ngIf="cpAlphaChannel != alphaChannel.disabled">A</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf="!cpDisableInput && cpColorMode == colorModeInternal.color"\r\n        class="hex-text"\r\n        [class.hex-alpha]="cpAlphaChannel == alphaChannel.forced"\r\n        [style.display]="format !== 0 ? \'none\' : \'block\'">\r\n        <div class="box">\r\n            <input cpText\r\n                [value]="hexText"\r\n                (blur)="onHexInput(null)"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onHexInput($event)" />\r\n            <input *ngIf="cpAlphaChannel == alphaChannel.forced"\r\n                type="number"\r\n                pattern="[0-9]+([\\.,][0-9]{1,2})?"\r\n                min="0"\r\n                max="1"\r\n                step="0.1"\r\n                cpText\r\n                [rg]="1"\r\n                [value]="hexAlpha"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onAlphaInput($event)" />\r\n        </div>\r\n\r\n        <div class="box">\r\n            <div>Hex</div>\r\n            <div *ngIf="cpAlphaChannel == alphaChannel.forced">A</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf="!cpDisableInput && cpColorMode == colorModeInternal.grayscale"\r\n        class="value-text">\r\n        <div class="box">\r\n            <input type="number"\r\n                pattern="[0-9]*"\r\n                min="0"\r\n                max="100"\r\n                cpText\r\n                [rg]="100"\r\n                [value]="hslaText?.l"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onValueInput($event)" />\r\n            <input *ngIf="cpAlphaChannel != alphaChannel.disabled"\r\n                type="number"\r\n                pattern="[0-9]+([\\.,][0-9]{1,2})?"\r\n                min="0"\r\n                max="1"\r\n                step="0.1"\r\n                cpText\r\n                [rg]="1"\r\n                [value]="hslaText?.a"\r\n                (keyup.enter)="onAcceptColor($event)"\r\n                (newValue)="onAlphaInput($event)" />\r\n        </div>\r\n\r\n        <div class="box">\r\n            <div>V</div>\r\n            <div>A</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf="!cpDisableInput && cpColorMode == colorModeInternal.color"\r\n        class="type-policy">\r\n        <span class="type-policy-arrow"\r\n            (click)="onFormatToggle(1)"></span>\r\n        <span class="type-policy-arrow"\r\n            (click)="onFormatToggle(-1)"></span>\r\n    </div>\r\n\r\n    <div *ngIf="cpPresetColors?.length || cpAddColorButton"\r\n        class="preset-area">\r\n        <hr>\r\n\r\n        <div class="preset-label">{{cpPresetLabel}}</div>\r\n\r\n        <div *ngIf="cpPresetColors?.length">\r\n            <div *ngFor="let color of cpPresetColors"\r\n                class="preset-color"\r\n                [style.backgroundColor]="color"\r\n                (click)="setColorFromString(color)">\r\n                <span *ngIf="cpAddColorButton"\r\n                    class="{{cpRemoveColorButtonClass}}"\r\n                    (click)="onRemovePresetColor($event, color)"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <div *ngIf="!cpPresetColors?.length && cpAddColorButton"\r\n            class="{{cpPresetEmptyMessageClass}}">{{cpPresetEmptyMessage}}</div>\r\n    </div>\r\n\r\n    <div *ngIf="cpOKButton || cpCancelButton"\r\n        class="button-area">\r\n        <button *ngIf="cpCancelButton"\r\n            type="button"\r\n            class="{{cpCancelButtonClass}}"\r\n            (click)="onCancelColor($event)">{{cpCancelButtonText}}</button>\r\n\r\n        <button *ngIf="cpOKButton"\r\n            type="button"\r\n            class="{{cpOKButtonClass}}"\r\n            (click)="onAcceptColor($event)">{{cpOKButtonText}}</button>\r\n    </div>\r\n</div>\r\n',encapsulation:n.ViewEncapsulation.Emulated,styles:[".color-picker{position:absolute;z-index:100000;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);display:flex;flex-direction:column}.color-picker *{box-sizing:border-box;margin:0;font-size:11px}.color-picker .color-picker__sv{position:relative;direction:ltr;width:100%;height:130px;border:none;cursor:pointer;touch-action:manipulation;background-image:linear-gradient(to bottom,rgba(0,0,0,0) 0,#000 100%),linear-gradient(to right,#fff 0,rgba(255,255,255,0) 100%);background-size:100% 100%}.color-picker .color-picker__cursor{cursor:pointer;position:absolute;border-radius:50%;width:16px;height:16px;border:2px solid #222;margin:0 -8px;transition:border .2s linear}.color-picker .color-picker__cursor.color-picker__cursor--sv{margin:-8px}.color-picker .color-picker__cursor.color-picker__cursor--white{border-color:#dadada}.color-picker .color-picker__controls{display:flex;margin:8px;align-items:flex-start}.color-picker .color-picker__controls .color-picker__selected{margin:4px;flex:48px 0 0}.color-picker .color-picker__controls .color-picker__hav{margin:-4px -4px -4px 0;flex:auto 1 1}.color-picker .color-picker__selected-color{width:48px;height:48px;display:flex;align-items:stretch;justify-content:stretch;border-radius:50%;background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat;box-shadow:0 0 8px 0 rgba(0,0,0,.5)}.color-picker .color-picker__selected-color div{width:100%;height:100%;border-radius:50%}.color-picker .color-picker__add-selected{background:0 0;margin:4px 0;border:none;padding:0;width:100%;text-align:center}.color-picker .color-picker__hav{display:flex;flex-wrap:wrap}.color-picker .color-picker__slider{width:100%;flex:100% 1 1;height:16px;margin:8px;position:relative}.color-picker .color-picker__slider.color-picker__slider--hue{background-size:100% 100%;background-image:linear-gradient(to right,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#ff00ff 83.33333%,red 100%)}.color-picker .color-picker__slider.color-picker__slider--value{background-size:100% 100%;background-image:linear-gradient(to right,#000 0,#fff 100%)}.color-picker .color-picker__slider.color-picker__slider--alpha{background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat}.color-picker .color-picker__slider.color-picker__slider--alpha .color-picker__slider--alpha-bg{position:absolute;top:0;left:0;right:0;bottom:0}.color-picker .color-picker__arrow{height:0;width:0;border-style:solid;position:absolute;z-index:999999}.color-picker .color-picker__arrow.color-picker__arrow--top{border-width:12px 6px;border-color:#999 transparent transparent;left:12px}.color-picker .color-picker__arrow.color-picker__arrow--left{border-width:6px 12px;border-color:transparent transparent transparent #999;top:12px;left:230px}.color-picker .color-picker__arrow.color-picker__arrow--right{border-width:6px 12px;border-color:transparent #999 transparent transparent;top:12px;left:-24px}.color-picker .color-picker__arrow.color-picker__arrow--bottom{border-width:12px 6px;border-color:transparent transparent #999;top:-24px;left:12px}.color-picker input{text-align:center;font-size:13px;height:26px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.color-picker input:invalid{box-shadow:none}.color-picker input::-webkit-inner-spin-button,.color-picker input::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}.color-picker .box{display:flex;padding:4px 8px}.color-picker .left{position:relative;padding:16px 8px}.color-picker .right{flex:1 1 auto;padding:12px 8px}.color-picker .button-area{padding:0 16px 16px;text-align:right}.color-picker .preset-area{padding:4px 15px}.color-picker .preset-area .preset-label{overflow:hidden;width:100%;padding:4px;font-size:11px;white-space:nowrap;text-align:left;text-overflow:ellipsis;color:#555}.color-picker .preset-area .preset-color{position:relative;display:inline-block;width:18px;height:18px;margin:4px 6px 8px;border:1px solid #a9a9a9;border-radius:25%;cursor:pointer}.color-picker .preset-area .preset-empty-message{min-height:18px;margin-top:4px;margin-bottom:8px;font-style:italic;text-align:center}.color-picker .hex-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hex-text .box{padding:0 24px 8px 8px}.color-picker .hex-text .box div{float:left;flex:1 1 auto;text-align:center;color:#555;clear:left}.color-picker .hex-text .box input{flex:1 1 auto;padding:1px;border:1px solid #a9a9a9}.color-picker .hex-alpha .box div:first-child,.color-picker .hex-alpha .box input:first-child{flex-grow:3;margin-right:8px}.color-picker .hsla-text,.color-picker .rgba-text,.color-picker .value-text{width:100%;padding:4px 8px;font-size:11px}.color-picker .hsla-text .box,.color-picker .rgba-text .box{padding:0 24px 8px 8px}.color-picker .value-text .box{padding:0 8px 8px}.color-picker .hsla-text .box div,.color-picker .rgba-text .box div,.color-picker .value-text .box div{flex:1 1 auto;margin-right:8px;text-align:center;color:#555}.color-picker .hsla-text .box div:last-child,.color-picker .rgba-text .box div:last-child,.color-picker .value-text .box div:last-child{margin-right:0}.color-picker .hsla-text .box input,.color-picker .rgba-text .box input,.color-picker .value-text .box input{float:left;flex:1;padding:1px;margin:0 8px 0 0;border:1px solid #a9a9a9}.color-picker .hsla-text .box input:last-child,.color-picker .rgba-text .box input:last-child,.color-picker .value-text .box input:last-child{margin-right:0}.color-picker .hue-alpha{align-items:center;margin-bottom:3px}.color-picker .hue{direction:ltr;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:linear-gradient(to right,red 0,#ff0 16.66667%,#0f0 33.33333%,#0ff 50%,#00f 66.66667%,#ff00ff 83.33333%,red 100%)}.color-picker .value{direction:rtl;width:100%;height:16px;margin-bottom:16px;border:none;cursor:pointer;background-size:100% 100%;background-image:linear-gradient(to right,#000 0,#fff 100%)}.color-picker .alpha{direction:ltr;width:100%;height:16px;border:none;cursor:pointer;background-size:16px;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cmVjdCBmaWxsPSIjQ0NDQ0NDIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgeT0iNTAiIGZpbGw9IiNDQ0NDQ0MiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCIvPjxyZWN0IHk9IjUwIiBmaWxsPSIjRkZGRkZGIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiLz48cmVjdCB4PSI1MCIgZmlsbD0iI0ZGRkZGRiIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIi8+PC9zdmc+);background-repeat:repeat}.color-picker .type-policy{position:absolute;top:218px;right:12px;width:24px;height:24px;background-size:contain;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgeD0iMCIgeT0iMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHZpZXdCb3g9IjAgMCAxMDAgMTAwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAxMDAgMTAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cG9seWdvbiBmaWxsPSIjMzMzMzMzIiBwb2ludHM9IjUwIDE2IDMwIDQ0IDcwIDQ0ICIvPjxwb2x5Z29uIGZpbGw9IiMzMzMzMzMiIHBvaW50cz0iNTAgODQgNzAgNTYgMzAgNTYgIi8+PC9zdmc+);background-repeat:no-repeat;background-position:center}.color-picker .type-policy .type-policy-arrow{display:block;width:100%;height:50%}.color-picker .selected-color{position:absolute;top:16px;left:8px;width:40px;height:40px;border:1px solid #a9a9a9;border-radius:50%}.color-picker .selected-color-background{width:40px;height:40px;border-radius:50%;background-image:url(\"data:image/png;base64, \\aiVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAh0lEQVRYR+2W0QlAMQgD60zdfwOdqa8TmI/wQMr5K0I5bZLIzLOa2nt37VVVbd+dDx5obgCC3KBLwJ2ff4PnVidkf+ucIhw80HQaCLo3DMH3CRK3iFsmAWVl6hPNDwt8EvNE5q+YuEXcMgkonVM6SdyCoEvAnZ8v1Hjx817MilmxSUB5rdLJDycZgUAZUch/AAAAAElFTkSuQmCC\")}.color-picker .cp-add-color-button-class{position:absolute;display:inline;padding:0;margin:3px -3px;border:0;cursor:pointer;background:0 0}.color-picker .cp-add-color-button-class:hover{text-decoration:underline}.color-picker .cp-add-color-button-class:disabled{cursor:not-allowed;color:#999}.color-picker .cp-add-color-button-class:disabled:hover{text-decoration:none}.color-picker .cp-remove-color-button-class{position:absolute;top:-5px;right:-5px;display:block;width:10px;height:10px;border-radius:50%;cursor:pointer;text-align:center;background:#fff;box-shadow:1px 1px 5px #333}.color-picker .cp-remove-color-button-class::before{content:'x';position:relative;bottom:3.5px;display:inline-block;font-size:10px}"]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:r}]},t.propDecorators={dialogElement:[{type:n.ViewChild,args:["dialogPopup"]}],handleEsc:[{type:n.HostListener,args:["document:keyup.esc",["$event"]]}],handleEnter:[{type:n.HostListener,args:["document:keyup.enter",["$event"]]}]},t}(),o=function(){function t(t,e,r,o,i){this.injector=t,this.cfr=e,this.appRef=r,this.vcRef=o,this.elRef=i,this.dialogCreated=!1,this.ignoreChanges=!1,this.cpWidth="230px",this.cpHeight="auto",this.cpToggle=!1,this.cpDisabled=!1,this.cpIgnoredElements=[],this.cpFallbackColor="",this.cpColorMode="color",this.cpOutputFormat=_.auto,this.cpAlphaChannel=B.enabled,this.cpDisableInput=!1,this.cpDialogDisplay=H.popup,this.cpSaveClickOutside=!0,this.cpCloseClickOutside=!0,this.cpUseRootViewContainer=!1,this.cpPosition=m.right,this.cpPositionOffset="0%",this.cpPositionRelativeToArrow=!1,this.cpOKButton=!1,this.cpOKButtonText="OK",this.cpOKButtonClass="cp-ok-button-class",this.cpCancelButton=!1,this.cpCancelButtonText="Cancel",this.cpCancelButtonClass="cp-cancel-button-class",this.cpPresetLabel="Preset colors",this.cpMaxPresetColorsLength=6,this.cpPresetEmptyMessage="No colors added",this.cpPresetEmptyMessageClass="preset-empty-message",this.cpAddColorButton=!1,this.cpAddColorButtonText="Add color",this.cpRemoveColorButtonClass="cp-remove-color-button-class",this.cpInputChange=new n.EventEmitter(!0),this.cpToggleChange=new n.EventEmitter(!0),this.cpSliderChange=new n.EventEmitter(!0),this.cpSliderDragEnd=new n.EventEmitter(!0),this.cpSliderDragStart=new n.EventEmitter(!0),this.cpOpen=new n.EventEmitter(!0),this.cpClose=new n.EventEmitter(!0),this.cpCancel=new n.EventEmitter(!0),this.cpSelect=new n.EventEmitter(!0),this.cpColorChange=new n.EventEmitter(!1),this.cpPresetColorsChange=new n.EventEmitter(!0)}return Object.defineProperty(t.prototype,"cpColor",{get:function(){return this._cpColor},set:function(t){this._cpColor=t,this.dialog&&this.dialog.setColorFromString(t,!1)},enumerable:!0,configurable:!0}),t.prototype.handleClick=function(){this.inputFocus()},t.prototype.handleFocus=function(){this.inputFocus()},t.prototype.handleInput=function(t){this.inputChange(t)},t.prototype.ngOnDestroy=function(){this.cmpRef!==undefined&&this.cmpRef.destroy()},t.prototype.ngOnChanges=function(t){t.cpToggle&&!this.cpDisabled&&(t.cpToggle.currentValue?this.openDialog():t.cpToggle.currentValue||this.closeDialog()),t.colorPicker&&(this.dialog&&!this.ignoreChanges&&(this.cpDialogDisplay==H.inline&&this.dialog.setInitialColor(t.colorPicker.currentValue),this.dialog.setColorFromString(t.colorPicker.currentValue,!1),this.cpUseRootViewContainer&&this.cpDialogDisplay!=H.inline&&this.cmpRef.changeDetectorRef.detectChanges()),this.ignoreChanges=!1),(t.cpPresetLabel||t.cpPresetColors)&&this.dialog&&this.dialog.setPresetConfig(this.cpPresetLabel,this.cpPresetColors)},t.prototype.openDialog=function(){if(this.dialogCreated)this.dialog&&this.dialog.openDialog(this.cpColor);else{var t=this.vcRef;if(this.dialogCreated=!0,this.cpUseRootViewContainer&&this.cpDialogDisplay!=H.inline){var e=this.appRef.componentTypes[0],r=this.injector.get(e);(t=r.vcRef||r.viewContainerRef||this.vcRef)===this.vcRef&&console.warn("You are using cpUseRootViewContainer, but the root component is not exposing viewContainerRef!Please expose it by adding 'public vcRef: ViewContainerRef' to the constructor.")}var o=this.cfr.resolveComponentFactory(I);this.cmpRef=t.createComponent(o,0,this.injector,[]),this.cmpRef.instance.setupDialog(this,this.elRef,this.cpColor,this.cpWidth,this.cpHeight,this.cpDialogDisplay,this.cpFallbackColor,this.cpColorMode,this.cpAlphaChannel,this.cpOutputFormat,this.cpDisableInput,this.cpIgnoredElements,this.cpSaveClickOutside,this.cpCloseClickOutside,this.cpUseRootViewContainer,this.cpPosition,this.cpPositionOffset,this.cpPositionRelativeToArrow,this.cpPresetLabel,this.cpPresetColors,this.cpMaxPresetColorsLength,this.cpPresetEmptyMessage,this.cpPresetEmptyMessageClass,this.cpOKButton,this.cpOKButtonClass,this.cpOKButtonText,this.cpCancelButton,this.cpCancelButtonClass,this.cpCancelButtonText,this.cpAddColorButton,this.cpAddColorButtonText,this.cpRemoveColorButtonClass),this.dialog=this.cmpRef.instance,this.vcRef!==t&&this.cmpRef.changeDetectorRef.detectChanges()}},t.prototype.closeDialog=function(){this.dialog&&this.cpDialogDisplay==H.popup&&this.dialog.closeDialog()},t.prototype.stateChanged=function(t){this.cpToggleChange.emit(t),t?this.cpOpen.emit(this.cpColor):this.cpClose.emit(this.cpColor)},t.prototype.colorChanged=function(t,e){void 0===e&&(e=!0),this.ignoreChanges=e,this.cpColorChange.emit(t)},t.prototype.colorCanceled=function(){this.cpCancel.emit()},t.prototype.colorSelected=function(t){this.cpSelect.emit(t)},t.prototype.inputFocus=function(){var e=this.elRef.nativeElement,t=this.cpIgnoredElements.filter(function(t){return t===e});this.cpDisabled||t.length||("undefined"!=typeof document&&e===document.activeElement?this.openDialog():this.dialog&&this.dialog.show?this.closeDialog():this.openDialog())},t.prototype.inputChange=function(t){this.dialog?this.dialog.setColorFromString(t.target.value,!0):(this.cpColor=t.target.value,this.cpColorChange.emit(this.cpColor))},t.prototype.inputChanged=function(t){this.cpInputChange.emit(t)},t.prototype.sliderChanged=function(t){this.cpSliderChange.emit(t)},t.prototype.sliderDragEnd=function(t){this.cpSliderDragEnd.emit(t)},t.prototype.sliderDragStart=function(t){this.cpSliderDragStart.emit(t)},t.prototype.presetColorsChanged=function(t){this.cpPresetColorsChange.emit(t)},t.decorators=[{type:n.Directive,args:[{selector:"[cpColor]"}]}],t.ctorParameters=function(){return[{type:n.Injector},{type:n.ComponentFactoryResolver},{type:n.ApplicationRef},{type:n.ViewContainerRef},{type:n.ElementRef}]},t.propDecorators={cpColor:[{type:n.Input}],cpWidth:[{type:n.Input}],cpHeight:[{type:n.Input}],cpToggle:[{type:n.Input}],cpDisabled:[{type:n.Input}],cpIgnoredElements:[{type:n.Input}],cpFallbackColor:[{type:n.Input}],cpColorMode:[{type:n.Input}],cpOutputFormat:[{type:n.Input}],cpAlphaChannel:[{type:n.Input}],cpDisableInput:[{type:n.Input}],cpDialogDisplay:[{type:n.Input}],cpSaveClickOutside:[{type:n.Input}],cpCloseClickOutside:[{type:n.Input}],cpUseRootViewContainer:[{type:n.Input}],cpPosition:[{type:n.Input}],cpPositionOffset:[{type:n.Input}],cpPositionRelativeToArrow:[{type:n.Input}],cpOKButton:[{type:n.Input}],cpOKButtonText:[{type:n.Input}],cpOKButtonClass:[{type:n.Input}],cpCancelButton:[{type:n.Input}],cpCancelButtonText:[{type:n.Input}],cpCancelButtonClass:[{type:n.Input}],cpPresetLabel:[{type:n.Input}],cpPresetColors:[{type:n.Input}],cpMaxPresetColorsLength:[{type:n.Input}],cpPresetEmptyMessage:[{type:n.Input}],cpPresetEmptyMessageClass:[{type:n.Input}],cpAddColorButton:[{type:n.Input}],cpAddColorButtonText:[{type:n.Input}],cpRemoveColorButtonClass:[{type:n.Input}],cpInputChange:[{type:n.Output}],cpToggleChange:[{type:n.Output}],cpSliderChange:[{type:n.Output}],cpSliderDragEnd:[{type:n.Output}],cpSliderDragStart:[{type:n.Output}],cpOpen:[{type:n.Output}],cpClose:[{type:n.Output}],cpCancel:[{type:n.Output}],cpSelect:[{type:n.Output}],cpColorChange:[{type:n.Output}],cpPresetColorsChange:[{type:n.Output}],handleClick:[{type:n.HostListener,args:["click"]}],handleFocus:[{type:n.HostListener,args:["focus"]}],handleInput:[{type:n.HostListener,args:["input",["$event"]]}]},t}(),y=function(){function t(t){var e=this;this.elRef=t,this.dragEnd=new n.EventEmitter,this.dragStart=new n.EventEmitter,this.newValue=new n.EventEmitter,this.listenerMove=function(t){return e.move(t)},this.listenerStop=function(){return e.stop()}}return t.prototype.mouseDown=function(t){this.start(t)},t.prototype.touchStart=function(t){this.start(t)},t.prototype.move=function(t){t.preventDefault(),this.setCursor(t)},t.prototype.start=function(t){this.setCursor(t),t.stopPropagation(),document.addEventListener("mouseup",this.listenerStop),document.addEventListener("touchend",this.listenerStop),document.addEventListener("mousemove",this.listenerMove),document.addEventListener("touchmove",this.listenerMove),this.dragStart.emit()},t.prototype.stop=function(){document.removeEventListener("mouseup",this.listenerStop),document.removeEventListener("touchend",this.listenerStop),document.removeEventListener("mousemove",this.listenerMove),document.removeEventListener("touchmove",this.listenerMove),this.dragEnd.emit()},t.prototype.getX=function(t){var e=this.elRef.nativeElement.getBoundingClientRect();return(t.pageX!==undefined?t.pageX:t.touches[0].pageX)-e.left-window.pageXOffset},t.prototype.getY=function(t){var e=this.elRef.nativeElement.getBoundingClientRect();return(t.pageY!==undefined?t.pageY:t.touches[0].pageY)-e.top-window.pageYOffset},t.prototype.setCursor=function(t){var e=this.elRef.nativeElement.offsetWidth,r=this.elRef.nativeElement.offsetHeight,o=Math.max(0,Math.min(this.getX(t),e)),i=Math.max(0,Math.min(this.getY(t),r));this.rgX!==undefined&&this.rgY!==undefined?this.newValue.emit({s:o/e,v:1-i/r,rgX:this.rgX,rgY:this.rgY}):this.rgX===undefined&&this.rgY!==undefined?this.newValue.emit({v:i/r,rgY:this.rgY}):this.rgX!==undefined&&this.rgY===undefined&&this.newValue.emit({v:o/e,rgX:this.rgX})},t.decorators=[{type:n.Directive,args:[{selector:"[cpSlider]"}]}],t.ctorParameters=function(){return[{type:n.ElementRef}]},t.propDecorators={rgX:[{type:n.Input}],rgY:[{type:n.Input}],slider:[{type:n.Input}],dragEnd:[{type:n.Output}],dragStart:[{type:n.Output}],newValue:[{type:n.Output}],mouseDown:[{type:n.HostListener,args:["mousedown",["$event"]]}],touchStart:[{type:n.HostListener,args:["touchstart",["$event"]]}]},t}(),k=function(){function t(){this.newValue=new n.EventEmitter}return t.prototype.inputChange=function(t){var e=t.target.value;if(this.rg===undefined)this.newValue.emit(e);else{var r=parseFloat(e);this.newValue.emit({v:r,rg:this.rg})}},t.decorators=[{type:n.Directive,args:[{selector:"[cpText]"}]}],t.propDecorators={rg:[{type:n.Input}],text:[{type:n.Input}],newValue:[{type:n.Output}],inputChange:[{type:n.HostListener,args:["input",["$event"]]}]},t}(),w=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{declarations:[k,y,I,o],imports:[e.CommonModule],exports:[I,o],entryComponents:[I]}]}],t}();t.ColorPickerService=r,t.ColorPickerComponent=I,t.ColorPickerModule=w,t.ColorFormats=p,t.Cmyk=s,t.Hsla=l,t.Hsva=h,t.Rgba=u,t.parseColorMode=O,t.OutputFormat=_,t.AlphaChannel=B,t.DialogPosition=m,t.DialogDisplay=H,t.Position=b,t.ColorModeInternal=x,t.ɵc=o,t.ɵb=y,t.ɵa=k,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=color-picker.umd.min.js.map